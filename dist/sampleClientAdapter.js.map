{"version":3,"sources":["../src/sampleClientAdapter.js"],"names":[],"mappings":";;AAAA;;AACA,IAAM,kBAAkB,kBAAxB;AACA,IAAM,WAAW,YAAjB;AACA,IAAM,mBAAmB,OAAzB;;AAEA,IAAM,UAAU,uCAAqB,+CAArB,EAAsE,QAAtE,EAAgF,eAAhF,EAAiG,gBAAjG,CAAhB,C;AACA,IAAM,SAAS,cAAc,KAAK,KAAL,CAAW,KAAK,MAAL,KAAc,MAAzB,CAA7B;;AAEA,SAAS,QAAT,GAAoB;AAChB;;AACA,WAAO,QAAQ,6BAAR,CAAsC,EAAC,OAAO,WAAR,EAAtC,EAA4D,IAA5D,CAAiE,UAAC,QAAD,EAAa;AACjF,YAAG,OAAO,SAAP,CAAiB,QAAjB,CAA0B,IAA1B,CAAgC,QAAhC,MAA+C,gBAAlD,EAAoE;AAChE,oBAAQ,GAAR,CAAY,SAAS,GAAT,CAAa,UAAC,OAAD;AAAA,uBAAW,QAAQ,aAAR,CAAsB,QAAQ,EAA9B,CAAX;AAAA,aAAb,CAAZ;AACH;AACJ,KAJM,EAIJ,KAJI,CAIE,UAAC,GAAD,EAAO;AAAC,gBAAQ,GAAR,CAAY,GAAZ;AAAiB,KAJ3B,CAAP;AAKH;;AAED,U;AAAA,CACK,IADL,CACU,YAAK;AACP,YAAQ,+BAAR,CAAwC,EAAC,WAAW,MAAZ,EAAoB,UAAU,MAA9B,EAAsC,OAAO,MAA7C,EAAxC,EAA8F,eAA9F,EACK,IADL,CACU,UAAC,MAAD,EAAW;AACb,gBAAQ,GAAR,CAAY,iBAAZ,EAA+B,OAAO,cAAP,CAAsB,EAArD;AACA,gBAAQ,GAAR,CAAY,mBAAZ,EAAiC,KAAK,SAAL,CAAe,OAAO,QAAtB,CAAjC;AACA,gBAAQ,eAAR,CAAwB,eAAe,EAAvC,EACK,IADL,CACU,UAAC,OAAD,EAAY;AACd,oBAAQ,GAAR,CAAY,mBAAZ,EAAiC,KAAK,SAAL,CAAe,OAAf,CAAjC;;AAEA,oBAAQ,SAAR,GAAoB,OAApB;AACA,oBAAQ,QAAR,GAAmB,MAAnB;;AAEA,oBAAQ,aAAR,CAAsB,OAAtB,EACK,IADL,CACU,UAAC,cAAD,EAAmB;AACrB,wBAAQ,GAAR,CAAY,iBAAZ,EAA+B,cAA/B;AACA,wBAAQ,2BAAR,CAAoC,YAApC,EAAkD,EAAlD,EACK,IADL,CACU,UAAC,QAAD,EAAa;AACf,4BAAQ,GAAR,CAAY,UAAZ,EAAwB,WAAW,SAAS,GAAT,CAAa;AAAA,+BAAS,KAAK,SAAL,CAAe,OAAf,EAAwB,GAAxB,EAA6B,CAA7B,CAAT;AAAA,qBAAb,CAAX,GAAoE,UAA5F;AACA,wBAAI,QAAJ,EAAc;;;;AAIb;AACJ,iBARL,EASK,KATL,CASW,UAAC,GAAD;AAAA,2BAAQ,QAAQ,KAAR,CAAc,GAAd,CAAR;AAAA,iBATX;AAUH,aAbL,EAcK,KAdL,CAcW,UAAC,GAAD;AAAA,uBAAQ,QAAQ,KAAR,CAAc,GAAd,CAAR;AAAA,aAdX;AAgBH,SAvBL,EAwBK,KAxBL,CAwBW,UAAC,GAAD;AAAA,mBAAQ,QAAQ,KAAR,CAAc,GAAd,CAAR;AAAA,SAxBX;AAyBH,KA7BL,EA8BK,KA9BL,CA8BW,UAAC,GAAD;AAAA,eAAQ,QAAQ,KAAR,CAAc,GAAd,CAAR;AAAA,KA9BX;AA+BH,CAjCL","file":"sampleClientAdapter.js","sourcesContent":["import {VTigerCrmAdapter} from './VTigerCrmAdapter.js';\r\nconst USER_ACCESS_KEY = 'XMvugt2SH21gjEhG';\r\nconst USERNAME = 'reisebuddy';\r\nconst ASSIGNED_USER_ID = '19x78';\r\n\r\nconst adapter = new VTigerCrmAdapter('http://localhost/vtigercrm_dbd/webservice.php', USERNAME, USER_ACCESS_KEY, ASSIGNED_USER_ID);/**/\r\nconst random = 'unittest_' + Math.floor(Math.random()*100000);\r\n\r\nfunction teardown() {\r\n    \"use strict\";\r\n    return adapter.findContactsBySkeletonPromise({email: 'unittest%'}).then((contacts)=> {\r\n        if(Object.prototype.toString.call( contacts ) === '[object Array]') {\r\n            Promise.all(contacts.map((contact)=>adapter.deletePromise(contact.id)));\r\n        }\r\n    }).catch((err)=>{console.err(err)});\r\n}\r\n\r\nteardown() //start from scratch\r\n    .then(()=> {\r\n        adapter.createContactWithMessagePromise({firstname: random, lastname: random, email: random}, \"Kampagnenname\")\r\n            .then((result)=> {\r\n                console.log('CREATED_CONTACT', result.createdContact.id);\r\n                console.log('MESSAGES FROM CRM', JSON.stringify(result.messages));\r\n                adapter.retrievePromise(createdContact.id)\r\n                    .then((contact)=> {\r\n                        console.log('RETRIEVED_CONTACT', JSON.stringify(contact));\r\n\r\n                        contact.firstname = 'James';\r\n                        contact.lastname = 'Bond';\r\n\r\n                        adapter.updatePromise(contact)\r\n                            .then((updatedContact)=> {\r\n                                console.log('UPDATED_CONTACT', updatedContact);\r\n                                adapter.findContactsFulltextPromise('unittest_%', 10)\r\n                                    .then((contacts)=> {\r\n                                        console.log('CONTACTS', contacts ? contacts.map(contact=>JSON.stringify(contact, \" \", 2)) : '<none />');\r\n                                        if (contacts) {\r\n                                            // adapter.deletePromise(contacts[0].id)\r\n                                            //     .then(()=>console.log('DELETED_CONTACT'))\r\n                                            //     .catch((err)=>console.log(err));\r\n                                        }\r\n                                    })\r\n                                    .catch((err)=> console.error(err));\r\n                            })\r\n                            .catch((err)=> console.error(err));\r\n\r\n                    })\r\n                    .catch((err)=> console.error(err));\r\n            })\r\n            .catch((err)=> console.error(err));\r\n    });"]}